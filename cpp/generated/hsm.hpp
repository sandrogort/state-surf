#pragma once
// Generated by StateSurf minimal generator (v1 subset). C++11 header-only.
enum class HsmState {
  InitialPseudoState,
  s,
  s1,
  s11,
  s2,
  s21,
  s211,
  FinalPseudoState
};

enum class HsmEvent {
  A,
  B,
  C,
  D,
  E,
  F,
  G,
  H,
  I,
  TERMINATE
};

enum class HsmGuardId {
  isFooTrue,
  isFooFalse
};

enum class HsmActionId {
  setFooFalse,
  setFooTrue
};

struct HsmHooks {
  virtual ~HsmHooks() {}
  virtual void on_entry(HsmState) = 0;
  virtual void on_exit(HsmState) = 0;
  virtual bool guard(HsmState, HsmEvent, HsmGuardId) = 0;
  virtual void action(HsmState, HsmEvent, HsmActionId) = 0;
};

inline void on_event(HsmState, HsmEvent) {}
inline void on_transition(HsmState, HsmState, HsmEvent) {}

class HsmMachine {
public:
  explicit HsmMachine(HsmHooks& impl) : impl_(impl) { reset(); }

  void reset() {
    terminated_ = false;
    started_ = false;
    s_ = HsmState::InitialPseudoState;
  }

  void start() {
    if (terminated_ || started_) return;
    started_ = true;
    on_transition(HsmState::InitialPseudoState, HsmState::s211, HsmEvent{});
    s_ = HsmState::s211;
    impl_.action(HsmState::s, HsmEvent{}, HsmActionId::setFooFalse);
    impl_.on_entry(HsmState::s);
    impl_.on_entry(HsmState::s2);
    impl_.on_entry(HsmState::s21);
    impl_.on_entry(HsmState::s211);
  }

  HsmState state() const { return s_; }
  bool terminated() const { return terminated_; }

  void dispatch(HsmEvent e) {
    if (terminated_) return;
    if (!started_) {
      start();
      if (!started_) return;
    }
    on_event(s_, e);
    switch (s_) {
      case HsmState::s: {
        switch (e) {
          case HsmEvent::I: {
            if (impl_.guard(s_, e, HsmGuardId::isFooTrue)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooFalse);
              return;
            }
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::s1: {
        switch (e) {
          case HsmEvent::I: {
            on_transition(s_, s_, e);
            return;
          }
          case HsmEvent::D: {
            if (impl_.guard(s_, e, HsmGuardId::isFooFalse)) {
              on_transition(s_, HsmState::s11, e);
              impl_.on_exit(HsmState::s1);
              impl_.action(s_, e, HsmActionId::setFooTrue);
              impl_.on_entry(HsmState::s1);
              impl_.on_entry(HsmState::s11);
              s_ = HsmState::s11;
              return;
            }
            return;
          }
          case HsmEvent::A: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::B: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::C: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s2);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::F: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s2);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::s11: {
        switch (e) {
          case HsmEvent::G: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s2);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::H: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::D: {
            if (impl_.guard(s_, e, HsmGuardId::isFooTrue)) {
              on_transition(s_, HsmState::s11, e);
              impl_.on_exit(HsmState::s11);
              impl_.action(s_, e, HsmActionId::setFooFalse);
              impl_.on_entry(HsmState::s11);
              s_ = HsmState::s11;
              return;
            }
            if (impl_.guard(s_, e, HsmGuardId::isFooFalse)) {
              on_transition(s_, HsmState::s11, e);
              impl_.on_exit(HsmState::s11);
              impl_.on_exit(HsmState::s1);
              impl_.action(s_, e, HsmActionId::setFooTrue);
              impl_.on_entry(HsmState::s1);
              impl_.on_entry(HsmState::s11);
              s_ = HsmState::s11;
              return;
            }
            return;
          }
          case HsmEvent::I: {
            on_transition(s_, s_, e);
            return;
          }
          case HsmEvent::A: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::B: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::C: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s2);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::F: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s2);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s11);
            impl_.on_exit(HsmState::s1);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::s2: {
        switch (e) {
          case HsmEvent::I: {
            if (impl_.guard(s_, e, HsmGuardId::isFooFalse)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooTrue);
              return;
            }
            if (impl_.guard(s_, e, HsmGuardId::isFooTrue)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooFalse);
              return;
            }
            return;
          }
          case HsmEvent::C: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::F: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s2);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::s21: {
        switch (e) {
          case HsmEvent::G: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::A: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::B: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::I: {
            if (impl_.guard(s_, e, HsmGuardId::isFooFalse)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooTrue);
              return;
            }
            if (impl_.guard(s_, e, HsmGuardId::isFooTrue)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooFalse);
              return;
            }
            return;
          }
          case HsmEvent::C: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::F: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::s211: {
        switch (e) {
          case HsmEvent::D: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::H: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::G: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::A: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_entry(HsmState::s21);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::B: {
            on_transition(s_, HsmState::s211, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_entry(HsmState::s211);
            s_ = HsmState::s211;
            return;
          }
          case HsmEvent::I: {
            if (impl_.guard(s_, e, HsmGuardId::isFooFalse)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooTrue);
              return;
            }
            if (impl_.guard(s_, e, HsmGuardId::isFooTrue)) {
              on_transition(s_, s_, e);
              impl_.action(s_, e, HsmActionId::setFooFalse);
              return;
            }
            return;
          }
          case HsmEvent::C: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::F: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          case HsmEvent::TERMINATE: {
            on_transition(s_, HsmState::FinalPseudoState, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_exit(HsmState::s);
            impl_.on_entry(HsmState::FinalPseudoState);
            s_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
          }
          case HsmEvent::E: {
            on_transition(s_, HsmState::s11, e);
            impl_.on_exit(HsmState::s211);
            impl_.on_exit(HsmState::s21);
            impl_.on_exit(HsmState::s2);
            impl_.on_entry(HsmState::s1);
            impl_.on_entry(HsmState::s11);
            s_ = HsmState::s11;
            return;
          }
          default: return;
        }
      }
      case HsmState::InitialPseudoState: {
        return;
      }
      case HsmState::FinalPseudoState: {
        return;
      }
    }
  }

private:
  HsmHooks& impl_;
  HsmState s_;
  bool started_ = false;
  bool terminated_ = false;
};