#pragma once
// Generated by StateSurf minimal generator (v1 subset). C++11 header-only.
#include <cstdint>

enum class HsmState : std::uint8_t {
  InitialPseudoState,
  s,
  s1,
  s11,
  s2,
  s21,
  s211,
  FinalPseudoState
};

enum class HsmEvent : std::uint8_t {
  A,
  B,
  C,
  D,
  E,
  F,
  G,
  H,
  I,
  TERMINATE
};

enum class HsmGuardId : std::uint8_t {
  isFooTrue,
  isFooFalse
};

enum class HsmActionId : std::uint8_t {
  setFooFalse,
  setFooTrue
};

struct HsmTransition {
  HsmState from_state;
  HsmState to_state;
};

inline void on_event(HsmState current_state, HsmEvent event) {
  (void)current_state;
  (void)event;
}

inline void on_transition(
  HsmTransition transition,
  HsmEvent event
) {
  (void)transition;
  (void)event;
}

/**
 * @brief Deterministic state machine generated from a PlantUML model.
 *
 * The `Callbacks` type argument must provide:
 *   - `void on_entry(HsmState)` invoked on every state entry
 *   - `void on_exit(HsmState)` invoked on every state exit
 *   - `bool guard(HsmState, HsmEvent, HsmGuardId)` to resolve guard conditions
 *   - `void action(HsmState, HsmEvent, HsmActionId)` for transition side-effects
 *
 * Hold a callbacks instance for any required application state and pass it
 * into the constructor. Call `start()` to trigger the initial transition (or
 * let the first `dispatch` call do it lazily), then drive the machine with
 * `dispatch(HsmEvent)` values. Query `state()` and
 * `terminated()` to observe runtime status.
 */
template <typename Callbacks>
class HsmMachine {
public:
  explicit HsmMachine(Callbacks& callbacks)
    : callbacks_(&callbacks) {
    reset();
  }

  void reset() {
    terminated_ = false;
    started_ = false;
    current_state_ = HsmState::InitialPseudoState;
  }

  void start() {
    if (terminated_ || started_) {
      return;
    }
    started_ = true;
    on_transition(HsmTransition{HsmState::InitialPseudoState, HsmState::s211}, HsmEvent{});
    current_state_ = HsmState::s211;
    callbacks_->action(HsmState::s, HsmEvent{}, HsmActionId::setFooFalse);
    callbacks_->on_entry(HsmState::s);
    callbacks_->on_entry(HsmState::s2);
    callbacks_->on_entry(HsmState::s21);
    callbacks_->on_entry(HsmState::s211);
  }

  HsmState state() const { return current_state_; }
  bool terminated() const { return terminated_; }

  void dispatch(HsmEvent event) {
    if (terminated_) {
      return;
    }
    if (!started_) {
      start();
      if (!started_) {
        return;
      }
    }
    on_event(current_state_, event);
    switch (current_state_) {
      case HsmState::s:
        handle_s(event);
        return;
      case HsmState::s1:
        handle_s1(event);
        return;
      case HsmState::s11:
        handle_s11(event);
        return;
      case HsmState::s2:
        handle_s2(event);
        return;
      case HsmState::s21:
        handle_s21(event);
        return;
      case HsmState::s211:
        handle_s211(event);
        return;
      case HsmState::InitialPseudoState:
      case HsmState::FinalPseudoState:
        return;
    }
  }

private:
  void handle_s(HsmEvent event) {
    switch (event) {
      case HsmEvent::I:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooTrue)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooFalse);
              return;
            }
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }
  void handle_s1(HsmEvent event) {
    switch (event) {
      case HsmEvent::I:
      {
            on_transition(HsmTransition{current_state_, current_state_}, event);
            return;
      }
      case HsmEvent::D:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooFalse)) {
              on_transition(HsmTransition{current_state_, HsmState::s11}, event);
              callbacks_->on_exit(HsmState::s1);
              callbacks_->action(current_state_, event, HsmActionId::setFooTrue);
              callbacks_->on_entry(HsmState::s1);
              callbacks_->on_entry(HsmState::s11);
              current_state_ = HsmState::s11;
              return;
            }
            return;
      }
      case HsmEvent::A:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::B:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::C:
      case HsmEvent::F:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s2);
            callbacks_->on_entry(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }
  void handle_s11(HsmEvent event) {
    switch (event) {
      case HsmEvent::G:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s2);
            callbacks_->on_entry(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::H:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::D:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooTrue)) {
              on_transition(HsmTransition{current_state_, HsmState::s11}, event);
              callbacks_->on_exit(HsmState::s11);
              callbacks_->action(current_state_, event, HsmActionId::setFooFalse);
              callbacks_->on_entry(HsmState::s11);
              current_state_ = HsmState::s11;
              return;
            }
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooFalse)) {
              on_transition(HsmTransition{current_state_, HsmState::s11}, event);
              callbacks_->on_exit(HsmState::s11);
              callbacks_->on_exit(HsmState::s1);
              callbacks_->action(current_state_, event, HsmActionId::setFooTrue);
              callbacks_->on_entry(HsmState::s1);
              callbacks_->on_entry(HsmState::s11);
              current_state_ = HsmState::s11;
              return;
            }
            return;
      }
      case HsmEvent::I:
      {
            on_transition(HsmTransition{current_state_, current_state_}, event);
            return;
      }
      case HsmEvent::A:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::B:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::C:
      case HsmEvent::F:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s2);
            callbacks_->on_entry(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s11);
            callbacks_->on_exit(HsmState::s1);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }
  void handle_s2(HsmEvent event) {
    switch (event) {
      case HsmEvent::I:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooFalse)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooTrue);
              return;
            }
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooTrue)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooFalse);
              return;
            }
            return;
      }
      case HsmEvent::C:
      case HsmEvent::F:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }
  void handle_s21(HsmEvent event) {
    switch (event) {
      case HsmEvent::G:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::A:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_entry(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::B:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::I:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooFalse)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooTrue);
              return;
            }
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooTrue)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooFalse);
              return;
            }
            return;
      }
      case HsmEvent::C:
      case HsmEvent::F:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }
  void handle_s211(HsmEvent event) {
    switch (event) {
      case HsmEvent::D:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::H:
      case HsmEvent::G:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::A:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_entry(HsmState::s21);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::B:
      {
            on_transition(HsmTransition{current_state_, HsmState::s211}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_entry(HsmState::s211);
            current_state_ = HsmState::s211;
            return;
      }
      case HsmEvent::I:
      {
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooFalse)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooTrue);
              return;
            }
            if (callbacks_->guard(current_state_, event, HsmGuardId::isFooTrue)) {
              on_transition(HsmTransition{current_state_, current_state_}, event);
              callbacks_->action(current_state_, event, HsmActionId::setFooFalse);
              return;
            }
            return;
      }
      case HsmEvent::C:
      case HsmEvent::F:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      case HsmEvent::TERMINATE:
      {
            on_transition(HsmTransition{current_state_, HsmState::FinalPseudoState}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_exit(HsmState::s);
            callbacks_->on_entry(HsmState::FinalPseudoState);
            current_state_ = HsmState::FinalPseudoState;
            terminated_ = true;
            return;
      }
      case HsmEvent::E:
      {
            on_transition(HsmTransition{current_state_, HsmState::s11}, event);
            callbacks_->on_exit(HsmState::s211);
            callbacks_->on_exit(HsmState::s21);
            callbacks_->on_exit(HsmState::s2);
            callbacks_->on_entry(HsmState::s1);
            callbacks_->on_entry(HsmState::s11);
            current_state_ = HsmState::s11;
            return;
      }
      default: {
        return;
      }
    }
  }

  Callbacks* callbacks_ = nullptr;
  HsmState current_state_ = HsmState::InitialPseudoState;
  bool started_ = false;
  bool terminated_ = false;
};