# Generated by StateSurf minimal generator (v1 subset). Python implementation.
from __future__ import annotations

from enum import Enum


class FsmState(Enum):
    InitialPseudoState = "InitialPseudoState"
    State1 = "State1"
    State2 = "State2"
    State3 = "State3"
    State4 = "State4"
    State5 = "State5"
    FinalPseudoState = "FinalPseudoState"


class FsmEvent(Enum):
    eventA = "eventA"
    eventB = "eventB"
    eventC = "eventC"
    eventD = "eventD"
    eventFoo = "eventFoo"
    init = "init"


class FsmGuardId(Enum):
    guardA = "guardA"
    guardB = "guardB"


class FsmActionId(Enum):
    actionA = "actionA"
    actionB = "actionB"


class FsmHooks:
    def on_entry(self, state: FsmState) -> None:
        raise NotImplementedError

    def on_exit(self, state: FsmState) -> None:
        raise NotImplementedError

    def guard(self, state: FsmState, event: FsmEvent, guard: FsmGuardId) -> bool:
        raise NotImplementedError

    def action(self, state: FsmState, event: FsmEvent, action: FsmActionId) -> None:
        raise NotImplementedError


def on_event(state: FsmState, event: FsmEvent) -> None:
    return None


def on_transition(src: FsmState, dst: FsmState, event: FsmEvent) -> None:
    return None


class FsmMachine:
    def __init__(self, hooks: FsmHooks) -> None:
        self._hooks = hooks
        self._state = FsmState.InitialPseudoState
        self._started = False
        self._terminated = False
        self.reset()

    def reset(self) -> None:
        self._terminated = False
        self._started = False
        self._state = FsmState.InitialPseudoState

    def start(self) -> None:
        if self._terminated or self._started:
            return
        self._started = True
        on_transition(FsmState.InitialPseudoState, FsmState.State1, self._default_event())
        self._state = FsmState.State1
        self._hooks.on_entry(FsmState.State1)

    def state(self) -> FsmState:
        return self._state

    def terminated(self) -> bool:
        return self._terminated

    def dispatch(self, event: FsmEvent) -> None:
        if self._terminated:
            return
        if not self._started:
            self.start()
            if not self._started:
                return
        on_event(self._state, event)
        if self._state == FsmState.State1:
            if event == FsmEvent.eventA:
              on_transition(self._state, FsmState.State2, event)
              self._hooks.on_exit(FsmState.State1)
              self._hooks.on_entry(FsmState.State2)
              self._state = FsmState.State2
              return
            elif event == FsmEvent.init:
              on_transition(self._state, self._state, event)
              return
            elif event == FsmEvent.eventFoo:
              on_transition(self._state, self._state, event)
              return
            else:
                return
        elif self._state == FsmState.State2:
            if event == FsmEvent.eventB:
              if self._hooks.guard(self._state, event, FsmGuardId.guardA):
                on_transition(self._state, FsmState.State3, event)
                self._hooks.on_exit(FsmState.State2)
                self._hooks.on_entry(FsmState.State3)
                self._state = FsmState.State3
                return
              return
            else:
                return
        elif self._state == FsmState.State3:
            if event == FsmEvent.eventC:
              on_transition(self._state, FsmState.State4, event)
              self._hooks.on_exit(FsmState.State3)
              self._hooks.action(self._state, event, FsmActionId.actionA)
              self._hooks.on_entry(FsmState.State4)
              self._state = FsmState.State4
              return
            else:
                return
        elif self._state == FsmState.State4:
            if event == FsmEvent.eventD:
              if self._hooks.guard(self._state, event, FsmGuardId.guardB):
                on_transition(self._state, FsmState.State5, event)
                self._hooks.on_exit(FsmState.State4)
                self._hooks.action(self._state, event, FsmActionId.actionB)
                self._hooks.on_entry(FsmState.State5)
                self._state = FsmState.State5
                return
              return
            else:
                return
        elif self._state == FsmState.State5:
            if event == FsmEvent.init:
              on_transition(self._state, self._state, event)
              return
            else:
                return
        elif self._state == FsmState.InitialPseudoState:
            return
        elif self._state == FsmState.FinalPseudoState:
            return
        else:
            return

    def _default_event(self) -> FsmEvent:
        return FsmEvent.eventA
